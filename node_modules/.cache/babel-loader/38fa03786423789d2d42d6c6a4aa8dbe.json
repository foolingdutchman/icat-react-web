{"ast":null,"code":"'use strict';\n\nvar $ = window.jQuery ? window.jQuery : require('jquery'),\n    Lightbox = require('./lightbox');\n\nvar lightbox = new Lightbox();\nif (!window.lightbox) window.lightbox = lightbox;\n$(function () {\n  var $body = $('body');\n  $body.append(require('./../templates/lightbox.handlebars')());\n  $.extend(lightbox, {\n    $over: $('#lightbox-over'),\n    $inner: $('#lightbox-inner'),\n    $loader: $('#lightbox-loader'),\n    $content: $('#lightbox-content'),\n    $page: $body.children()\n  });\n  $('[data-lightbox-path]').each(function () {\n    var $this = $(this);\n    lightbox.localContent[$this.data('lightbox-path')] = $this.html();\n    $this.remove();\n  });\n  $(window).resize(function () {\n    lightbox.isDesktop = $(window).width() > 767;\n  });\n  $(document).on({\n    click: function (e) {\n      var $link = $(this);\n      var target = $link.attr('href');\n      lightbox.load_content(target);\n      e.preventDefault();\n    }\n  }, 'a[target=\"lightbox\"]');\n  $(document).on({\n    submit: function (e) {\n      e.preventDefault();\n      var $form = $(this);\n      var fieldworkForm = $form.data('fw-form');\n      var mockEvent = {\n        proceed: true,\n        preventDefault: function () {\n          this.proceed = false;\n        }\n      };\n      if (fieldworkForm) fieldworkForm.submit(mockEvent);\n\n      if (!fieldworkForm || mockEvent.proceed) {\n        var action = $form.attr('action');\n        lightbox.load_content(action, {\n          url: action,\n          method: $form.attr('method'),\n          data: $form.serialize()\n        });\n        $form.find('[type=\"submit\"]').attr('disabled', 'disabled');\n      }\n    }\n  }, 'form[target=\"lightbox\"]');\n  $(document).on({\n    click: function (e) {\n      lightbox.close();\n      if ($(e.target).attr('href') == '#') e.preventDefault();\n    }\n  }, '.action-lightbox-close');\n  $(document).on({\n    click: function (e) {\n      lightbox.closePending();\n      if ($(e.target).attr('href') == '#') e.preventDefault();\n    }\n  }, '.action-lightbox-close-pending');\n});\nmodule.exports = lightbox;","map":{"version":3,"sources":["/Users/hehao/react-icat-web/node_modules/lightbox/assets/scripts/main.js"],"names":["$","window","jQuery","require","Lightbox","lightbox","$body","append","extend","$over","$inner","$loader","$content","$page","children","each","$this","localContent","data","html","remove","resize","isDesktop","width","document","on","click","e","$link","target","attr","load_content","preventDefault","submit","$form","fieldworkForm","mockEvent","proceed","action","url","method","serialize","find","close","closePending","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nvar $        = window.jQuery ? window.jQuery : require('jquery'),\n    Lightbox = require('./lightbox');\n\nvar lightbox = new Lightbox();\n\nif (!window.lightbox)\n    window.lightbox = lightbox;\n\n$(function () {\n\n    var $body = $('body');\n\n    $body.append(require('./../templates/lightbox.handlebars')());\n\n    $.extend(lightbox, {\n        $over:    $('#lightbox-over'),\n        $inner:   $('#lightbox-inner'),\n        $loader:  $('#lightbox-loader'),\n        $content: $('#lightbox-content'),\n        $page:    $body.children()\n    });\n\n    $('[data-lightbox-path]').each(function () {\n        var $this                                          = $(this);\n        lightbox.localContent[$this.data('lightbox-path')] = $this.html();\n        $this.remove();\n    });\n\n    $(window).resize(function () {\n        lightbox.isDesktop = $(window).width() > 767;\n    });\n\n    $(document).on({\n        click: function (e) {\n            var $link  = $(this);\n            var target = $link.attr('href');\n            lightbox.load_content(target);\n\n            e.preventDefault();\n        }\n    }, 'a[target=\"lightbox\"]');\n\n    $(document).on({\n        submit: function (e) {\n            e.preventDefault();\n            var $form         = $(this);\n            var fieldworkForm = $form.data('fw-form');\n            var mockEvent     = {\n                proceed:        true,\n                preventDefault: function () {\n                    this.proceed = false;\n                }\n            };\n            if (fieldworkForm)\n                fieldworkForm.submit(mockEvent);\n            if (!fieldworkForm || mockEvent.proceed) {\n                var action = $form.attr('action');\n                lightbox.load_content(action, {\n                    url:    action,\n                    method: $form.attr('method'),\n                    data:   $form.serialize()\n                });\n                $form.find('[type=\"submit\"]').attr('disabled', 'disabled');\n            }\n        }\n    }, 'form[target=\"lightbox\"]');\n\n    $(document).on({\n        click: function (e) {\n            lightbox.close();\n            if ($(e.target).attr('href') == '#')\n                e.preventDefault();\n        }\n    }, '.action-lightbox-close');\n\n    $(document).on({\n        click: function (e) {\n            lightbox.closePending();\n            if ($(e.target).attr('href') == '#')\n                e.preventDefault();\n        }\n    }, '.action-lightbox-close-pending');\n});\n\nmodule.exports = lightbox;"]},"metadata":{},"sourceType":"script"}